#include <unistd.h>

import Blocks;
import Renderers;

import <vector>;
import <memory>;

int main() {
    auto lblock = std::make_shared<LBlock>(1);
    auto zblock = std::make_shared<ZBlock>(2);
    std::vector<std::vector<char>> pixels1{
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {'T', 'T', 'T', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', 'T', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', '*', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', 'S', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', 'Z', 'S', 'S', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', 'Z', 'Z', 'I', 'S', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', 'Z', 'J', 'I', ' ', ' '},
        {' ', ' ', ' ', ' ', 'O', 'O', ' ', 'J', 'I', ' ', ' '},
        {'I', 'I', 'I', 'I', 'O', 'O', 'J', 'J', 'I', ' ', ' '},
    };

    std::vector<std::vector<char>> pixels2{
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {'I', 'I', 'I', 'I', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', 'S', ' ', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', ' ', ' ', 'S', 'S', ' ', ' ', ' ', ' '},
        {' ', ' ', ' ', 'J', ' ', ' ', 'S', ' ', ' ', 'O', 'O'},
        {'O', 'O', ' ', 'J', 'T', 'T', 'T', ' ', ' ', 'O', 'O'},
        {'O', 'O', 'J', 'J', ' ', 'T', 'I', 'I', 'I', 'I', ' '},
    };

    RenderPackage p1{100, 120, pixels1, 1, lblock, false};
    RenderPackage p2{140, 200, pixels2, 2, zblock, false};

    GuiRenderer gui{};
    usleep(100000);  // wait 100ms for window is ready
    gui.render(p1, p2);

    sleep(5);
}
